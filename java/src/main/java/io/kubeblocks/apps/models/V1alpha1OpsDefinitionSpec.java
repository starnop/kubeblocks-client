/*
 * Kubernetes
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: v1.27.4
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


package io.kubeblocks.apps.models;

import java.util.Objects;
import java.util.Arrays;
import com.google.gson.TypeAdapter;
import com.google.gson.annotations.JsonAdapter;
import com.google.gson.annotations.SerializedName;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;
import io.kubeblocks.apps.models.V1alpha1OpsDefinitionSpecActionsInner;
import io.kubeblocks.apps.models.V1alpha1OpsDefinitionSpecComponentInfosInner;
import io.kubeblocks.apps.models.V1alpha1OpsDefinitionSpecParametersSchema;
import io.kubeblocks.apps.models.V1alpha1OpsDefinitionSpecPodInfoExtractorsInner;
import io.kubeblocks.apps.models.V1alpha1OpsDefinitionSpecPreConditionsInner;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonArray;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import com.google.gson.TypeAdapter;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;
import java.io.IOException;

import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import io.kubernetes.client.openapi.JSON;

/**
 * OpsDefinitionSpec defines the desired state of OpsDefinition.
 */
@jakarta.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", date = "2024-06-13T15:59:08.817252Z[Etc/UTC]")
public class V1alpha1OpsDefinitionSpec {
  public static final String SERIALIZED_NAME_ACTIONS = "actions";
  @SerializedName(SERIALIZED_NAME_ACTIONS)
  private List<V1alpha1OpsDefinitionSpecActionsInner> actions = new ArrayList<>();

  public static final String SERIALIZED_NAME_COMPONENT_INFOS = "componentInfos";
  @SerializedName(SERIALIZED_NAME_COMPONENT_INFOS)
  private List<V1alpha1OpsDefinitionSpecComponentInfosInner> componentInfos;

  public static final String SERIALIZED_NAME_PARAMETERS_SCHEMA = "parametersSchema";
  @SerializedName(SERIALIZED_NAME_PARAMETERS_SCHEMA)
  private V1alpha1OpsDefinitionSpecParametersSchema parametersSchema;

  public static final String SERIALIZED_NAME_POD_INFO_EXTRACTORS = "podInfoExtractors";
  @SerializedName(SERIALIZED_NAME_POD_INFO_EXTRACTORS)
  private List<V1alpha1OpsDefinitionSpecPodInfoExtractorsInner> podInfoExtractors;

  public static final String SERIALIZED_NAME_PRE_CONDITIONS = "preConditions";
  @SerializedName(SERIALIZED_NAME_PRE_CONDITIONS)
  private List<V1alpha1OpsDefinitionSpecPreConditionsInner> preConditions;

  public V1alpha1OpsDefinitionSpec() {
  }

  public V1alpha1OpsDefinitionSpec actions(List<V1alpha1OpsDefinitionSpecActionsInner> actions) {
    
    this.actions = actions;
    return this;
  }

  public V1alpha1OpsDefinitionSpec addActionsItem(V1alpha1OpsDefinitionSpecActionsInner actionsItem) {
    if (this.actions == null) {
      this.actions = new ArrayList<>();
    }
    this.actions.add(actionsItem);
    return this;
  }

   /**
   * Specifies a list of OpsAction where each customized action is executed sequentially.
   * @return actions
  **/
  @jakarta.annotation.Nonnull
  public List<V1alpha1OpsDefinitionSpecActionsInner> getActions() {
    return actions;
  }


  public void setActions(List<V1alpha1OpsDefinitionSpecActionsInner> actions) {
    this.actions = actions;
  }


  public V1alpha1OpsDefinitionSpec componentInfos(List<V1alpha1OpsDefinitionSpecComponentInfosInner> componentInfos) {
    
    this.componentInfos = componentInfos;
    return this;
  }

  public V1alpha1OpsDefinitionSpec addComponentInfosItem(V1alpha1OpsDefinitionSpecComponentInfosInner componentInfosItem) {
    if (this.componentInfos == null) {
      this.componentInfos = new ArrayList<>();
    }
    this.componentInfos.add(componentInfosItem);
    return this;
  }

   /**
   * Specifies a list of ComponentDefinition for Components associated with this OpsDefinition. It also includes connection credentials (address and account) for each Component.
   * @return componentInfos
  **/
  @jakarta.annotation.Nullable
  public List<V1alpha1OpsDefinitionSpecComponentInfosInner> getComponentInfos() {
    return componentInfos;
  }


  public void setComponentInfos(List<V1alpha1OpsDefinitionSpecComponentInfosInner> componentInfos) {
    this.componentInfos = componentInfos;
  }


  public V1alpha1OpsDefinitionSpec parametersSchema(V1alpha1OpsDefinitionSpecParametersSchema parametersSchema) {
    
    this.parametersSchema = parametersSchema;
    return this;
  }

   /**
   * Get parametersSchema
   * @return parametersSchema
  **/
  @jakarta.annotation.Nullable
  public V1alpha1OpsDefinitionSpecParametersSchema getParametersSchema() {
    return parametersSchema;
  }


  public void setParametersSchema(V1alpha1OpsDefinitionSpecParametersSchema parametersSchema) {
    this.parametersSchema = parametersSchema;
  }


  public V1alpha1OpsDefinitionSpec podInfoExtractors(List<V1alpha1OpsDefinitionSpecPodInfoExtractorsInner> podInfoExtractors) {
    
    this.podInfoExtractors = podInfoExtractors;
    return this;
  }

  public V1alpha1OpsDefinitionSpec addPodInfoExtractorsItem(V1alpha1OpsDefinitionSpecPodInfoExtractorsInner podInfoExtractorsItem) {
    if (this.podInfoExtractors == null) {
      this.podInfoExtractors = new ArrayList<>();
    }
    this.podInfoExtractors.add(podInfoExtractorsItem);
    return this;
  }

   /**
   * Specifies a list of PodInfoExtractor, each designed to select a specific Pod and extract selected runtime info from its PodSpec. The extracted information, such as environment variables, volumes and tolerations, are then injected into Jobs or Pods that execute the OpsActions defined in &#x60;actions&#x60;.
   * @return podInfoExtractors
  **/
  @jakarta.annotation.Nullable
  public List<V1alpha1OpsDefinitionSpecPodInfoExtractorsInner> getPodInfoExtractors() {
    return podInfoExtractors;
  }


  public void setPodInfoExtractors(List<V1alpha1OpsDefinitionSpecPodInfoExtractorsInner> podInfoExtractors) {
    this.podInfoExtractors = podInfoExtractors;
  }


  public V1alpha1OpsDefinitionSpec preConditions(List<V1alpha1OpsDefinitionSpecPreConditionsInner> preConditions) {
    
    this.preConditions = preConditions;
    return this;
  }

  public V1alpha1OpsDefinitionSpec addPreConditionsItem(V1alpha1OpsDefinitionSpecPreConditionsInner preConditionsItem) {
    if (this.preConditions == null) {
      this.preConditions = new ArrayList<>();
    }
    this.preConditions.add(preConditionsItem);
    return this;
  }

   /**
   * Specifies the preconditions that must be met to run the actions for the operation. if set, it will check the condition before the Component runs this operation. Example: &#x60;&#x60;&#x60;yaml preConditions: - rule: expression: &#39;{{ eq .component.status.phase \&quot;Running\&quot; }}&#39; message: Component is not in Running status. &#x60;&#x60;&#x60;
   * @return preConditions
  **/
  @jakarta.annotation.Nullable
  public List<V1alpha1OpsDefinitionSpecPreConditionsInner> getPreConditions() {
    return preConditions;
  }


  public void setPreConditions(List<V1alpha1OpsDefinitionSpecPreConditionsInner> preConditions) {
    this.preConditions = preConditions;
  }



  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || getClass() != o.getClass()) {
      return false;
    }
    V1alpha1OpsDefinitionSpec v1alpha1OpsDefinitionSpec = (V1alpha1OpsDefinitionSpec) o;
    return Objects.equals(this.actions, v1alpha1OpsDefinitionSpec.actions) &&
        Objects.equals(this.componentInfos, v1alpha1OpsDefinitionSpec.componentInfos) &&
        Objects.equals(this.parametersSchema, v1alpha1OpsDefinitionSpec.parametersSchema) &&
        Objects.equals(this.podInfoExtractors, v1alpha1OpsDefinitionSpec.podInfoExtractors) &&
        Objects.equals(this.preConditions, v1alpha1OpsDefinitionSpec.preConditions);
  }

  @Override
  public int hashCode() {
    return Objects.hash(actions, componentInfos, parametersSchema, podInfoExtractors, preConditions);
  }

  @Override
  public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("class V1alpha1OpsDefinitionSpec {\n");
    sb.append("    actions: ").append(toIndentedString(actions)).append("\n");
    sb.append("    componentInfos: ").append(toIndentedString(componentInfos)).append("\n");
    sb.append("    parametersSchema: ").append(toIndentedString(parametersSchema)).append("\n");
    sb.append("    podInfoExtractors: ").append(toIndentedString(podInfoExtractors)).append("\n");
    sb.append("    preConditions: ").append(toIndentedString(preConditions)).append("\n");
    sb.append("}");
    return sb.toString();
  }

  /**
   * Convert the given object to string with each line indented by 4 spaces
   * (except the first line).
   */
  private String toIndentedString(Object o) {
    if (o == null) {
      return "null";
    }
    return o.toString().replace("\n", "\n    ");
  }


  public static HashSet<String> openapiFields;
  public static HashSet<String> openapiRequiredFields;

  static {
    // a set of all properties/fields (JSON key names)
    openapiFields = new HashSet<String>();
    openapiFields.add("actions");
    openapiFields.add("componentInfos");
    openapiFields.add("parametersSchema");
    openapiFields.add("podInfoExtractors");
    openapiFields.add("preConditions");

    // a set of required properties/fields (JSON key names)
    openapiRequiredFields = new HashSet<String>();
    openapiRequiredFields.add("actions");
  }

 /**
  * Validates the JSON Object and throws an exception if issues found
  *
  * @param jsonObj JSON Object
  * @throws IOException if the JSON Object is invalid with respect to V1alpha1OpsDefinitionSpec
  */
  public static void validateJsonObject(JsonObject jsonObj) throws IOException {
      if (jsonObj == null) {
        if (!V1alpha1OpsDefinitionSpec.openapiRequiredFields.isEmpty()) { // has required fields but JSON object is null
          throw new IllegalArgumentException(String.format("The required field(s) %s in V1alpha1OpsDefinitionSpec is not found in the empty JSON string", V1alpha1OpsDefinitionSpec.openapiRequiredFields.toString()));
        }
      }

      Set<Entry<String, JsonElement>> entries = jsonObj.entrySet();
      // check to see if the JSON string contains additional fields
      for (Entry<String, JsonElement> entry : entries) {
        if (!V1alpha1OpsDefinitionSpec.openapiFields.contains(entry.getKey())) {
          throw new IllegalArgumentException(String.format("The field `%s` in the JSON string is not defined in the `V1alpha1OpsDefinitionSpec` properties. JSON: %s", entry.getKey(), jsonObj.toString()));
        }
      }

      // check to make sure all required properties/fields are present in the JSON string
      for (String requiredField : V1alpha1OpsDefinitionSpec.openapiRequiredFields) {
        if (jsonObj.get(requiredField) == null) {
          throw new IllegalArgumentException(String.format("The required field `%s` is not found in the JSON string: %s", requiredField, jsonObj.toString()));
        }
      }
      // ensure the json data is an array
      if (!jsonObj.get("actions").isJsonArray()) {
        throw new IllegalArgumentException(String.format("Expected the field `actions` to be an array in the JSON string but got `%s`", jsonObj.get("actions").toString()));
      }

      JsonArray jsonArrayactions = jsonObj.getAsJsonArray("actions");
      // validate the required field `actions` (array)
      for (int i = 0; i < jsonArrayactions.size(); i++) {
        V1alpha1OpsDefinitionSpecActionsInner.validateJsonObject(jsonArrayactions.get(i).getAsJsonObject());
      };
      if (jsonObj.get("componentInfos") != null && !jsonObj.get("componentInfos").isJsonNull()) {
        JsonArray jsonArraycomponentInfos = jsonObj.getAsJsonArray("componentInfos");
        if (jsonArraycomponentInfos != null) {
          // ensure the json data is an array
          if (!jsonObj.get("componentInfos").isJsonArray()) {
            throw new IllegalArgumentException(String.format("Expected the field `componentInfos` to be an array in the JSON string but got `%s`", jsonObj.get("componentInfos").toString()));
          }

          // validate the optional field `componentInfos` (array)
          for (int i = 0; i < jsonArraycomponentInfos.size(); i++) {
            V1alpha1OpsDefinitionSpecComponentInfosInner.validateJsonObject(jsonArraycomponentInfos.get(i).getAsJsonObject());
          };
        }
      }
      // validate the optional field `parametersSchema`
      if (jsonObj.get("parametersSchema") != null && !jsonObj.get("parametersSchema").isJsonNull()) {
        V1alpha1OpsDefinitionSpecParametersSchema.validateJsonObject(jsonObj.getAsJsonObject("parametersSchema"));
      }
      if (jsonObj.get("podInfoExtractors") != null && !jsonObj.get("podInfoExtractors").isJsonNull()) {
        JsonArray jsonArraypodInfoExtractors = jsonObj.getAsJsonArray("podInfoExtractors");
        if (jsonArraypodInfoExtractors != null) {
          // ensure the json data is an array
          if (!jsonObj.get("podInfoExtractors").isJsonArray()) {
            throw new IllegalArgumentException(String.format("Expected the field `podInfoExtractors` to be an array in the JSON string but got `%s`", jsonObj.get("podInfoExtractors").toString()));
          }

          // validate the optional field `podInfoExtractors` (array)
          for (int i = 0; i < jsonArraypodInfoExtractors.size(); i++) {
            V1alpha1OpsDefinitionSpecPodInfoExtractorsInner.validateJsonObject(jsonArraypodInfoExtractors.get(i).getAsJsonObject());
          };
        }
      }
      if (jsonObj.get("preConditions") != null && !jsonObj.get("preConditions").isJsonNull()) {
        JsonArray jsonArraypreConditions = jsonObj.getAsJsonArray("preConditions");
        if (jsonArraypreConditions != null) {
          // ensure the json data is an array
          if (!jsonObj.get("preConditions").isJsonArray()) {
            throw new IllegalArgumentException(String.format("Expected the field `preConditions` to be an array in the JSON string but got `%s`", jsonObj.get("preConditions").toString()));
          }

          // validate the optional field `preConditions` (array)
          for (int i = 0; i < jsonArraypreConditions.size(); i++) {
            V1alpha1OpsDefinitionSpecPreConditionsInner.validateJsonObject(jsonArraypreConditions.get(i).getAsJsonObject());
          };
        }
      }
  }

  public static class CustomTypeAdapterFactory implements TypeAdapterFactory {
    @SuppressWarnings("unchecked")
    @Override
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
       if (!V1alpha1OpsDefinitionSpec.class.isAssignableFrom(type.getRawType())) {
         return null; // this class only serializes 'V1alpha1OpsDefinitionSpec' and its subtypes
       }
       final TypeAdapter<JsonElement> elementAdapter = gson.getAdapter(JsonElement.class);
       final TypeAdapter<V1alpha1OpsDefinitionSpec> thisAdapter
                        = gson.getDelegateAdapter(this, TypeToken.get(V1alpha1OpsDefinitionSpec.class));

       return (TypeAdapter<T>) new TypeAdapter<V1alpha1OpsDefinitionSpec>() {
           @Override
           public void write(JsonWriter out, V1alpha1OpsDefinitionSpec value) throws IOException {
             JsonObject obj = thisAdapter.toJsonTree(value).getAsJsonObject();
             elementAdapter.write(out, obj);
           }

           @Override
           public V1alpha1OpsDefinitionSpec read(JsonReader in) throws IOException {
             JsonObject jsonObj = elementAdapter.read(in).getAsJsonObject();
             validateJsonObject(jsonObj);
             return thisAdapter.fromJsonTree(jsonObj);
           }

       }.nullSafe();
    }
  }

 /**
  * Create an instance of V1alpha1OpsDefinitionSpec given an JSON string
  *
  * @param jsonString JSON string
  * @return An instance of V1alpha1OpsDefinitionSpec
  * @throws IOException if the JSON string is invalid with respect to V1alpha1OpsDefinitionSpec
  */
  public static V1alpha1OpsDefinitionSpec fromJson(String jsonString) throws IOException {
    return new JSON().getGson().fromJson(jsonString, V1alpha1OpsDefinitionSpec.class);
  }

 /**
  * Convert an instance of V1alpha1OpsDefinitionSpec to an JSON string
  *
  * @return JSON string
  */
  public String toJson() {
    return new JSON().getGson().toJson(this);
  }
}

